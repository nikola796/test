/*
 * ************************************************************* *
 * Name       : eWizard                                          *
 * Date       : October 2012                                     *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 1.1                                              *
 * Updated    : 01/04/2013                                       *
 * Developer  : Mark                                             *
 * Dependency :                                                  *
 * Lib        : jQuery 1.7+                                      *
 * Licence    : NOT free                                         *
 * This is part of a themeforest file                            *
 * ************************************************************* *
 */
  
;(function(e,t,n,r){e.fn.eWizard=function(t){t=e.extend({},e.fn.eWizard.options,t);return this.each(function(){function a(e){var t=100/o*e+100/o;i.find(".e-wizard-progress").find("span").css({width:t+"%"})}function f(t){s.removeClass("e-wizard-active");s.each(function(n,r){if(n<=t){e(this).addClass("e-wizard-active")}})}function l(e){if(t.buttonNavigation===true){if(e==0){i.find(".e-wizard-prev").addClass("e-wizard-disabled")}else{i.find(".e-wizard-prev").removeClass("e-wizard-disabled")}if(e+1==o){i.find(".e-wizard-next").addClass("e-wizard-disabled")}else{i.find(".e-wizard-next").removeClass("e-wizard-disabled")}}}function c(e,n){if(!e.parents("."+u).length){var i=e.parent("div");if(n===r){var s=t.labelError}else{var s=n}if(i.hasClass("e-checkbox")||i.hasClass("e-select")||i.hasClass("e-select-multiple")){if(i.hasClass("e-checkbox")){var o="width:auto;float:left;"}else{var o=""}e.parent().wrap('<div class="'+u+' clearfix" style="'+o+'"/>').parent("."+u).prepend("<span>"+s+"<span></span></span>")}else{e.wrap('<div class="'+u+' clearfix"/>').parent("."+u).prepend("<span>"+s+"<span></span></span>")}}}function h(e){var t=e.parents("."+u);if(t.length){t.children("span").remove().end().replaceWith(t.contents())}}function p(t){e("."+u).children("span").show();n.children("fieldset:eq("+t+")").find("input:not([type=submit]), select, textarea").each(function(){var t=e(this);var i=t.data("validation-type");var s=t.data("validation-label");var o=t.data("validation-match-value");var u=t.data("validation-minimum");var a=t.data("validation-maximum");var o=t.data("validation-match");if(u===r){var f=0}else{var f=u-1}if(a===r){var l=1e7}else{var l=a}switch(i){case"present":if(t.is("[type=checkbox]")){if(t.is(":checked")){h(t)}else{c(t,s)}}else if(t.is("select")){if(e.trim(t.val()).length>0){h(t)}else{c(t,s)}}else{if(e.trim(t.val()).length>f&&t.val().length<l){h(t)}else{c(t,s)}}break;case"email":var p=t.val();var d=/^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;if(d.test(p)){h(t)}else{c(t,s)}break;case"url":var p=t.val();var d=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(d.test(p)){h(t)}else{c(t,s)}break;case"numbers":var p=t.val();var d=/^[0+9]$/;if(e.trim(t.val()).length>f&&t.val().length<l&&d.test(p)){h(t)}else{c(t,s)}break;case"date":var p=t.val();var d=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4}$/i;if(d.test(p)){h(t)}else{c(t,s)}break;case"letters":var p=t.val();var d=/^[A-Za-z ]+$/;if(e.trim(t.val()).length>f&&t.val().length<l&&d.test(p)){h(t)}else{c(t,s)}break;case"regex":var p=t.val();var d=t.attr("valdiation-regex");if(d.test(p)){h(t)}else{c(t,s)}break;case"password":if(e.trim(t.val()).length>f&&t.val().length<l){if(t.val()==n.find('[data-validation-type="password"]').not(t).val()){h(t)}else{c(t,s)}}else{c(t,s)}break;case"match":if(t.val()==o){h(t)}else{c(t,s)}break;case"ip":var p=t.val();var d=/\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/;if(d.test(p)){h(t)}else{c(t,s)}break}})}function d(e){n.children("fieldset").hide().end().children("fieldset:eq("+e+")").show()}var n=e(this);var i=n.parents(".e-wizard");var s=i.find(".e-wizard-steps").children("li");var o=s.length;var u="e-wizard-errorlabel";i.attr("data-wizard-step",0);f(0);if(t.buttonNavigation===true){i.append("<footer>"+'<div class="e-wizard-ctrls">'+'<a href="#" class="button-icon-text e-wizard-prev"><span class="arrow-left-10 plix-10"></span>Prev</a>'+'<a href="#" class="button-text-icon e-wizard-next">Next <span class="arrow-right-10 plix-10"></span></a>'+"</div>"+"</footer>");s.addClass("cursor-pointer");i.find(".e-wizard-prev").addClass("e-wizard-disabled")}if(t.showProgressbar===true){i.children("header").append('<div class="e-wizard-progress">'+"<div>"+"<span></span>"+"</div>"+"</div>");a(i.attr("data-wizard-step"))}if(t.stepNavigation===true){s.click(function(r){var s=e(this).index();var o=i.attr("data-wizard-step");p(o);if(!n.children("fieldset:eq("+o+")").find("."+u).length||s<=o){f(s);i.attr("data-wizard-step",s);d(s);a(s);l(s);if(typeof t.onSwitch=="function"){t.onSwitch.call(this)}}r.preventDefault()})}if(t.buttonNavigation===true){i.on("click",".e-wizard-prev",function(r){if(!e(r.target).is(".e-wizard-disabled")){var s=parseInt(i.attr("data-wizard-step"));var o=s-1;p(o-1);if(!n.children("fieldset:eq("+(o-1)+")").find("."+u).length||o<=s){i.attr("data-wizard-step",o);d(o);a(o);f(o);l(o);if(typeof t.onSwitch=="function"){t.onSwitch.call(this)}}}r.preventDefault()}).on("click",".e-wizard-next",function(r){if(!e(r.target).is(".e-wizard-disabled")){var s=parseInt(i.attr("data-wizard-step"));var o=s+1;p(o-1);if(!n.children("fieldset:eq("+(o-1)+")").find("."+u).length||o<=s){i.attr("data-wizard-step",o);d(o);a(o);f(o);l(o);if(typeof t.onSwitch=="function"){t.onSwitch.call(this)}}}r.preventDefault()})}n.submit(function(e){p(o-1);if(!n.children("fieldset").find("."+u).length){if(typeof t.onSubmit=="function"){t.onSubmit.call(this)}}else{return false}})})};e.fn.eWizard.options={showProgressbar:true,nextLabel:"next",prevLabel:"prev",buttonNavigation:true,stepNavigation:true,labelError:"This field is required!",onSwitch:function(){},onSubmit:function(){}}})(jQuery,window,document)