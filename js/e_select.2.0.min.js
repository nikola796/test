/*
 * ************************************************************* *
 * Name       : eSelect                                          *
 * Date       : December 2011                                    *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 2.0                                              *
 * Updated    : 01/03/2013                                       *
 * Developer  : Mark                                             *
 * Dependency :                                                  *
 * Lib        : jQuery 1.7+                                      *
 * Licence    : NOT free                                         *
 * This is part of a themeforest file                            *
 * ************************************************************* *
 */

;(function(e,t,n,r){function s(t,n){this.obj=e(t);this.o=e.extend({},e.fn[i].defaults,n);this.init()}var i="eSelect";s.prototype={_settings:function(){var e=this;if("ontouchstart"in t||t.DocumentTouch&&n instanceof DocumentTouch){clickEvent="click tap"}else{clickEvent="click"}},init:function(){var e=this;e._build()},_build:function(){var t=this;if(t.obj.parent(".e-select").length){t.obj.parent(".e-select").find(".e-select-inner, .e-select-options").remove();t.obj.unwrap()}else if(t.obj.parent(".e-select-multiple").length){t.obj.parent(".e-select-multiple").find(".e-select-multiple-inner, .e-select-multiple-handle").remove();t.obj.unwrap()}if(t.obj.attr("multiple")||t.obj.attr("size")){if(t.obj.attr("size")){var n=t.obj.attr("size");var r=n*30;var i='style="height:'+r+'px;"';var s="e-select-size"}else{var i="";var s=""}t.obj.not(t.o.exclude).hide().wrap('<div class="e-select-multiple '+s+'" '+i+"/>").after('<div class="e-select-multiple-inner">'+"<ul>"+"</ul>"+"</div>"+'<div class="e-select-multiple-handle">'+"<span></span>"+"</div>").end().children("option").each(function(t){var n=e(this).attr("class");var r=e(this).text();if(e(this).is(":selected")){var i="e-select-multiple-highlite"}else{var i=""}e(this).parents(".e-select-multiple").children(".e-select-multiple-inner").children("ul").append('<li class="'+i+" "+n+'" data-select-id="'+t+'">'+r+"</li>");e(this).attr("data-select-id",t)})}else{t.obj.not(t.o.exclude).hide().wrap('<div class="e-select"/>').after('<div class="e-select-inner">'+'<div class="e-select-selected"></div><div class="e-select-trigger"><span></span></div>'+"</div>"+'<div class="e-select-options">'+"<ul>"+"</ul>"+"</div>").end().children("option").each(function(t){var n=e(this).attr("class");var r=e(this).text();if(e(this).is(":selected")){e(this).parents(".e-select").children(".e-select-inner").children(".e-select-selected").text(r)}e(this).parents(".e-select").children(".e-select-options").children("ul").append('<li class="'+n+'" data-select-id="'+t+'">'+r+"</li>");e(this).attr("data-select-id",t)})}t._dragHandle();t._clickEvents()},_clickEvents:function(){var t=this;t._settings();t.obj.parents(".e-select").on(clickEvent,".e-select-inner",function(){var n=e(this).next(".e-select-options");if(n.is(":hidden")){e(".e-select-options").slideUp(t.o.speed);n.slideDown(t.o.speed)}else{n.slideToggle(t.o.speed)}});t.obj.parents(".e-select").on(clickEvent,"li",function(n){var r=e(this).attr("data-select-id");e(this).parents(".e-select").children(".e-select-inner").children(".e-select-selected").text(e(this).text()).parents(".e-select").find("select").children().removeAttr("selected").parent().children('option[data-select-id="'+r+'"]').attr("selected","selected").parents(".e-select").children(".e-select-options").slideUp(t.o.speed);if(typeof t.o.onSelect=="function"){t.o.onSelect.call(this)}});t.obj.parent(".e-select-multiple").on(clickEvent,"li",function(){var n=e(this).attr("data-select-id");if(e(this).parents(".e-select-size").length){e(this).parent().find(".e-select-multiple-highlite").removeClass("e-select-multiple-highlite");e(this).addClass("e-select-multiple-highlite").parents(".e-select-size").find("select").children().removeAttr("selected").parent().find('option[data-select-id="'+n+'"]').attr("selected","selected")}else{if(e(this).hasClass("e-select-multiple-highlite")){e(this).removeClass("e-select-multiple-highlite").parents(".e-select-multiple").find('option[data-select-id="'+n+'"]').removeAttr("selected")}else{e(this).addClass("e-select-multiple-highlite").parents(".e-select-multiple").find('option[data-select-id="'+n+'"]').attr("selected","selected")}}if(typeof t.o.onSelect=="function"){t.o.onSelect.call(this)}});e(n).on(clickEvent,this,function(n){if(!e(n.target).is(".e-select *")){e(".e-select-options").slideUp(t.o.speed)}})},_dragHandle:function(){var e=this;var t=e.obj.parent(".e-select-multiple");var n=t.outerHeight();var r=t.children(".e-select-multiple-inner");var i=t.children(".e-select-multiple-handle").children();var s=r.outerHeight()+5;var o=n/(s/n);i.height(o);i.draggable({axis:"y",containment:e.obj.parent(),drag:function(){var e=i.position().top;r.css({top:-(e*(s/n))})}})},update:function(){var e=this;e._build()},destroy:function(){var e=this;e.widget.off("click",e._clickEvents());e.obj.removeData(i)}};e.fn[i]=function(t){return this.each(function(){var n=e(this);var r=n.data(i);var o=typeof t=="object"&&t;if(!r){n.data(i,r=new s(this,o))}if(typeof t=="string"){r[t]()}})};e.fn[i].defaults={exclude:"",speed:200,onSelect:function(){}}})(jQuery,window,document)