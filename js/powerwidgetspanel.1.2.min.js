/*
 * ************************************************************* *
 * Name       : Power Widgets Panel                              *
 * Date       : May 2012                                         *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 1.2                                              *
 * Updated    : 19/10/2012                                       *
 * Developer  : Mark                                             *
 * Dependency : json2(ie7)                                       *
 * Lib        : jQuery 1.7+                                      *
 * Licence    : http://codecanyon.net/item/power-widgets-manage-and-display-your-content/2901689
 * ************************************************************* *
 */ 
  
;(function(a,b,c,d){a.fn.powerWidgetsPanel=function(d){d=a.extend({},a.fn.powerWidgetsPanel.options,d);return this.each(function(){function x(){if(q&&j){var b=[];g.find(i).each(function(){var c={};c["id"]=a(this).attr("id");c["style"]=a(this).attr("data-widget-attstyle");c["title"]=a(this).children("header").children("h2").text();c["hidden"]=a(this).is(":hidden")?1:0;c["collapsed"]=a(this).hasClass("powerwidget-collapsed")?1:0;b.push(c)});var c=JSON.stringify({widget:b});if(s!=c){localStorage.setItem(r,c)}}}var e=a(this);var f=a(d.target).attr("id");var g=a(d.target);var h=d.trigger;var i=d.widgets;var j=d.localStorage;var k=d.effectWidget;var l=d.speedWidget;var m=d.triggerClass;var n=d.effectPanel;var o=d.speedPanel;var p="powerwidgets-panel-active";var q=!!function(){var a,b=+(new Date);try{localStorage.setItem(b,b);a=localStorage.getItem(b)==b;localStorage.removeItem(b);return a}catch(c){}}()&&localStorage;if(q&&j){var r="powerwidgets_settings_"+location.pathname+"_"+f;var s=localStorage.getItem(r)}if(!f.length){alert("You are using a class instead of an ID, Please change this!")}if("ontouchstart"in b||b.DocumentTouch&&c instanceof DocumentTouch){var t="click tap"}else{var t="click"}if(q&&j&&s){var u=JSON.parse(s);for(var v in u.widget){var w=e.find('[data-widget-id="'+u.widget[v].id+'"]');if(u.widget[v].hidden==1){w.addClass(p).find("[type=checkbox]").removeAttr("checked")}else{w.find("[type=checkbox]").attr("checked","checked")}}}e.find("input").each(function(){var b="pwlabels-"+Math.floor(Math.random()*999);if(a(this).attr("id")){var c=a(this).attr("id")}else{c=b}if(a(this).prev("label")){a(this).attr("id",c).prev("label").attr("for",c)}if(a(this).next("label")){a(this).attr("id",c).next("label").attr("for",c)}});e.find("[data-widget-id]").on(t,".e-checkbox",function(b){var c=a(this).parents("[data-widget-id]");var e=a("#"+c.data("widget-id"));if(c.hasClass(p)){c.removeClass(p)}else{c.addClass(p)}if(e.is(":hidden")){if(k=="fade"){var f="fadeIn"}else{f="slideDown"}}else{if(k=="fade"){var f="fadeOut"}else{f="slideUp"}}e[f](l,function(){x()});if(typeof d.onToggle=="function"){d.onToggle.call(this)}return false});a("body").on(t,h,function(b){var c=m.split("|");if(e.is(":hidden")){a(this).children().addClass(c[1]).removeClass(c[0])}else{a(this).children().addClass(c[0]).removeClass(c[1])}if(e.is(":hidden")){if(n=="fade"){var d="fadeIn"}else{d="slideDown"}}else{if(n=="fade"){var d="fadeOut"}else{d="slideUp"}}e[d](o);b.preventDefault()})})};a.fn.powerWidgetsPanel.options={target:"",widgets:".powerwidget",localStorage:true,trigger:"",triggerClass:"plus-10 | min-10",effectPanel:"slide",speedPanel:200,effectWidget:"slide",speedWidget:200,onToggle:function(){}}})(jQuery,window,document)